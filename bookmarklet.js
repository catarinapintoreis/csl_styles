(function MendeleyBookmarklet(){if(!window.mendeleybookmarklet)window.mendeleybookmarklet={};var iframeZIndex=2147483640;var body,iframe,loadingDiv,closeButtonDiv,iframeLoadCounter;function handleIframeLoad(){if(++iframeLoadCounter==2){loadingDiv.style.visibility="hidden";iframe.style.visibility="visible";setLoadingFlag(false)}}function createIframe(){iframe=document.createElement("IFRAME");iframe.src="about:blank";iframe.allowTransparency=true;iframe.style.cssText="position:fixed;z-index:"+iframeZIndex+
";visibility:hidden;-moz-box-sizing:border-box;box-sizing:border-box;padding:15px;border:0px;background:transparent;height:100%;width:350px;top:0;right:0;overflow:hidden;";iframe.height="100%";iframe.width="350px";body.appendChild(iframe);if(iframe.attachEvent)iframe.attachEvent("onload",handleIframeLoad);else iframe.onload=handleIframeLoad}function createLoadingDiv(){loadingDiv=document.createElement("DIV");loadingDiv.style.cssText="position:fixed;z-index:"+(iframeZIndex+1)+";top:15px;right:15px;border: 5px solid rgba(0,0,0,0.3);border-radius:5px;margin: 0;padding: 0;width:320px;-moz-box-sizing: border-box;box-sizing: border-box;";
var loadingMsg=document.createElement("DIV");loadingMsg.style.cssText="padding: 8px;background: #f7f7f7;text-align:left;font-family:Arial, sans-serif;font-size:14px;line-height:24px;color:#666;padding-left:50px;background-image: -webkit-linear-gradient(bottom, rgb(226,226,226) 0%, rgb(255,255,255) 100%);";loadingMsg.innerHTML="Importer loading...";var mendeleyBadge=document.createElement("IMG");mendeleyBadge.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhCAYAAAC4JqlRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNkU1NTk1NTNDREMxMUUyQUM0M0VEQjQ5QTA2NjkzRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNkU1NTk1NjNDREMxMUUyQUM0M0VEQjQ5QTA2NjkzRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU2RTU1OTUzM0NEQzExRTJBQzQzRURCNDlBMDY2OTNGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU2RTU1OTU0M0NEQzExRTJBQzQzRURCNDlBMDY2OTNGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VdfT4QAABq5JREFUeNrEV1ls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";
mendeleyBadge.style.cssText="position:absolute;top:0;left:10px;";body.appendChild(loadingDiv);loadingDiv.appendChild(mendeleyBadge);loadingDiv.appendChild(loadingMsg)}function createCloseButtonDiv(){closeButtonDiv=document.createElement("DIV");closeButtonDiv.style.cssText="position:fixed;z-index:"+(iframeZIndex+2)+";";if(navigator.appVersion.indexOf("MSIE 7.")!=-1){var closeButton=document.createElement("A");closeButton.href="#";closeButton.style.cssText="position:fixed;border:0px;background:#222;color:#fff;border: 2px solid rgba(255,255,255,1);height:20px;line-height:22px !important;width:21px;top:7px;right:320px;text-align:center;font-size:16px !important;font-weight:bold !important;text-decoration:none !important;font-family: Arial, sans-serif !important;";
closeButton.innerHTML="&#215;"}else{var closeButton=document.createElement("IMG");closeButton.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxNDMxM0JBQUFCRTUxMUUyODZCQ0IyQzQxNEVBNDQ0NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNEI0Q0E1NkFDMDExMUUyODZCQ0IyQzQxNEVBNDQ0NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjE0MzEzQkE4QUJFNTExRTI4NkJDQjJDNDE0RUE0NDQ3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjE0MzEzQkE5QUJFNTExRTI4NkJDQjJDNDE0RUE0NDQ3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VICatgAAA6dJREFUeNqcVktLW1EQnjxMKqkhVdMKWogKUmsNVLCmixSJXVgXsauCIAguXBb8A1JcKd26VXBbUNBNu9AgFKJWpSRqQy2RgA+sBhMrVZOY3M53ODdc85DUgUnOnTPzfec5c3RUXHTQeDzeZTab3Uaj8aXBYHiq0+keKYryO51O/7i+vl5OJBJfbTbbIvsqUksSgBtisdhbBgooJQj84I84GZ8HmPttTKVSn3nkXTBsbm7S2toaBYNB2t3dpWg0StXV1dTQ0EBOp5Pa29uptbVVBPPMFsvKyt6gqZ2VrgDBKhM839/fp7m5OZqfn6fT09Oi066srCSv10u9vb1UV1cHou9M1KEl0mkJksnkF3bwbG9v09TUFC0tLZW6xNTZ2UmDg4PU0tJCPFCfyWTqVon00kd/eHjoBQFmMDk5ST6fjzKZTMkKf8QhHjjAAy7JHzELXucPMMzMzNDCwgLxZv63Ig7xEIlnBL4gCYfDr5n9WSAQoNnZ2bxRjo2NFRx9ITvigQM84KokBqvV+grsfr+fjo+Pb4xufHycenp6aGtr64Yd37CjX2tHPHAgEtcgSMrLy3EaaGNjI28JhoeHs5sbCoWEDf+qoD83BjgQiStI9Hyjn2hBcrWxsTELurOzk23DXshfHYTE1WPT7/OljYNRDSomkUgk23Y4HEX9OP0Q7weaaU5DNrHxfIGisFRVVRU9OVoClbCYL3BkBoiqG69cXFz8grGpqangKdrb28uC19bWZtuwF/IHDkTiisuY4bQhdqqtrS1vVBMTE1nQmpoaYcO/KujPjQEOROJmBAlPfRlGt9stcpE2YGhoSJx9u91+w45v2NGvtSMeOHJJgZtBu4zVfn5+/hNpe3R0VGHHOyviIcADLvAxExynq/X19Y9g7O/vp+7u7julFcQhHiLxriS+yF1m1oe8hn6Mgi+T0tfXp1RUVJSs8EccBDjAk7jZcoKKZmF9fHZ2FoIjFyhlZGREqa+vVywWS1FFP/zgD0E8cCSeIa+eIBOwPjg5OfnEWfQFOlZXV0UaX1lZIdSZo6MjcbpQN1wuF3k8HuroEFkJVfMbH4h33IyxXuZWSJUIh8CKkfDJec91O1xKjYcf/OUMrBJHd2uNZzXJ6Vqnp6e7mpubXXwJnfwqcXDSs11eXvIjJh45ODgIcp5aGRgYwGvlD+tf1uRtNV5r02vI7kk1a0YIgBRrQp6gKw14ptAS3frukptnkMR6DUlGalpq0XfXPwEGAC/2hSkSgXukAAAAAElFTkSuQmCC";
closeButton.style.cssText="position:fixed;top:7px;right:320px;cursor:pointer;"}closeButton.title="Close the importer";closeButton.onclick=function(){cleanUpOnShutdown();return false};body.appendChild(closeButtonDiv);closeButtonDiv.appendChild(closeButton)}function submitIframeForm(hroot){var iframeDoc=iframe.contentWindow.document;iframeDoc.open();iframeDoc.write(""+"<html>"+"<head></head>"+"<body onload='submitForm();'>"+"\t<form style='display:none' id='mendeleyForm' method='post' action='"+hroot+
"/import/html/' accept-charset='UTF-8'>"+"\t\t<textarea id='htmlCode' name='html'></textarea>"+"\t\t<input type='hidden' name='url' id='mendeleyUrl'/>"+"\t\t<input type='hidden' name='version' value='1.1'>"+"\t</form>"+"\t<script>"+"\tfunction submitForm() {"+"\t\tvar url = document.getElementById('mendeleyUrl');"+"\t\turl.value = window.parent.document.location.href;"+"\t\tvar html = document.getElementById('htmlCode');"+"\t\thtml.value = window.parent.mendeleybookmarklet.html;"+"\t\tvar form = document.getElementById('mendeleyForm');"+
"\t\tform.submit();"+"\t}"+"\t<\/script>"+"</body>"+"</html>");iframeDoc.close()}function saveInjectedElements(){window.mendeleybookmarklet.elements={iframe:iframe,loadingDiv:loadingDiv,closeButtonDiv:closeButtonDiv}}function getInjectedElements(){return window.mendeleybookmarklet.elements}function cleanUpOnInitUI(){iframeLoadCounter=0;removeElements(getInjectedElements());window.mendeleybookmarklet.elements=undefined}function cleanUpOnShutdown(){removeElements(getInjectedElements());window.mendeleybookmarklet=
undefined}function removeElements(elements){if(elements)for(var key in elements){var element=elements[key];if(element)element.parentNode.removeChild(element)}}function setLoadingFlag(loading){window.mendeleybookmarklet.loading=loading?true:undefined}function getLoadingFlag(){return window.mendeleybookmarklet.loading}function removeScriptTag(){var scriptNode=document.getElementsByTagName("body")[0].lastChild;var src=scriptNode.getAttribute("src");try{scriptNode.parentNode.removeChild(scriptNode)}catch(e){}return src}
function initUI(hroot){if(getLoadingFlag()){alert("Please wait while the importer is loading");return}cleanUpOnInitUI();setLoadingFlag(true);window.mendeleybookmarklet.html="<html>"+document.documentElement.innerHTML+"</html>";body=document.getElementsByTagName("BODY")[0];createLoadingDiv();createIframe();createCloseButtonDiv();saveInjectedElements();submitIframeForm(hroot)}function run(){var source=removeScriptTag();var mendeleyHroot=source.match(/^https?:\/\/[^/]+/);initUI(mendeleyHroot)}try{run()}catch(e){}})();
